<!DOCTYPE html>
<html>
<head>
<title>Card Display</title>
<style>
  .card-container {
    display: flex; /* Use flexbox for layout */
    flex-wrap: wrap; /* Allow wrapping to multiple rows */
    gap: 10px; /* Spacing between cards */
  }

  .card {
    border: 1px solid #ccc;
    padding: 10px; /* Reduced padding */
    width: 200px; /* Set a fixed width */
    height: 350px; /* Set a fixed height */
    display: flex;
    flex-direction: column;
    align-items: center; /* Center image horizontally */
    justify-content: center;
  }

  .card img {
    max-width: 100%; /* Image should not exceed card width */
    max-height: 80%; /* Image should not exceed card height */
    object-fit: contain; /* Maintain aspect ratio and fit within container */
  }

  .card-details {
    display: none; /* Hide details by default */
  }

  h1 {
      text-align: center;
  }

  #searchInput {
      width: 50%;
      margin: 20px auto;
      display: block;
  }
</style>
</head>
<body>

<h1>Card Search</h1>
<input type="text" id="searchInput" placeholder="Search cards...">

<div class="card-container" id="cardContainer"></div>

<script>
const cards = [
  {
    src: "ST01-001-Gundam.png",
    alt: "ST01-001",
    counter: 0,
    name: "Gundam",
    color: "blue",
    cost: 3,
    level: 4,
    type: "unit"
  },
  {
    src: "ST01-001_plus-Gundam.png", // Example - Replace with your image paths
    alt: "ST01-001+",
    counter: 0,
    name: "Gundam",
    color: "blue",
    cost: 3,
    level: 4,
    type: "unit"
  },
  {
      src: "ST01-002-GundamMA.png", // Example
      alt: "ST01-002",
      counter: 0,
      name: "Gundam (MA Form)",
      color: "blue",
      cost: 3,
      level: 5,
      type: "unit"
  },
  {
      src: "ST01-005-GM.png", // Example
      alt: "ST01-005",
      counter: 0,
      name: "GM",
      color: "blue",
      cost: 1,
      level: 2,
      type: "unit"
  },
  {
      src: "ST01-007-AerialBoF.png", // Example
      alt: "ST01-007",
      counter: 0,
      name: "Aerial (Bit on Form)",
      color: "white",
      cost: 2,
      level: 4,
      type: "unit"
  },
];

function displayCards(cardsToDisplay) {
  const cardContainer = document.getElementById('cardContainer');
  cardContainer.innerHTML = ''; // Clear existing cards

  cardsToDisplay.forEach(card => {
    const cardDiv = document.createElement('div');
    cardDiv.classList.add('card');

    const img = document.createElement('img');
    img.src = card.src;
    img.alt = card.alt;
    cardDiv.appendChild(img);

    // Hidden details for search:
    const detailsDiv = document.createElement('div');
    detailsDiv.classList.add('card-details');
    detailsDiv.innerHTML = `
      <p>Name: ${card.name}</p>
      <p>Color: ${card.color}</p>
      <p>Cost: ${card.cost}</p>
      <p>Level: ${card.level}</p>
      <p>Type: ${card.type}</p>
    `;
    cardDiv.appendChild(detailsDiv);

    const counterDiv = document.createElement('div'); //Separate div for the counter
    counterDiv.innerHTML = `
        <p>Counter: <span id="counter-${card.alt}">${card.counter}</span></p>
        <button onclick="incrementCounter('${card.alt}')">+</button>
        <button onclick="decrementCounter('${card.alt}')">-</button>
    `;
    cardDiv.appendChild(counterDiv);


    cardContainer.appendChild(cardDiv);
  });
}

function incrementCounter(cardAlt) {
    const counterSpan = document.getElementById(`counter-${cardAlt}`);
    let counterValue = parseInt(counterSpan.textContent);
    counterValue++;
    counterSpan.textContent = counterValue;

    //Update the card Object (Important for persistence if you were to save the data)
    const cardIndex = cards.findIndex(card => card.alt === cardAlt);
    if (cardIndex !== -1) {
        cards[cardIndex].counter = counterValue;
    }
}

function decrementCounter(cardAlt) {
    const counterSpan = document.getElementById(`counter-${cardAlt}`);
    let counterValue = parseInt(counterSpan.textContent);
    if (counterValue > 0) {
        counterValue--;
        counterSpan.textContent = counterValue;
        const cardIndex = cards.findIndex(card => card.alt === cardAlt);
        if (cardIndex !== -1) {
            cards[cardIndex].counter = counterValue;
        }
    }
}

const searchInput = document.getElementById('searchInput');

searchInput.addEventListener('input', function() {
  const searchTerm = this.value.toLowerCase();
  const filteredCards = cards.filter(card => {
    const detailsDiv = card.querySelector('.card-details'); //Get the hidden details
    const textToSearch = detailsDiv.textContent.toLowerCase(); //Search all the hidden text
    return textToSearch.includes(searchTerm);
  });
  displayCards(filteredCards);
});

displayCards(cards); // Initial display

</script>

</body>
</html>
