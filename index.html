<!DOCTYPE html>
<html>
<head>
<title>Card Display</title>
<style>
  .card-container {
    display: flex; /* Use flexbox for layout */
    flex-wrap: wrap; /* Allow wrapping to multiple rows */
    gap: 10px; /* Spacing between cards */
  }

  .card {
    border: 1px solid #ccc;
    padding: 10px; /* Reduced padding */
    width: 200px; /* Set a fixed width */
    height: 350px; /* Set a fixed height */
    display: flex;
    flex-direction: column;
    align-items: center; /* Center image horizontally */
    justify-content: center;
  }

  .card img {
    max-width: 100%; /* Image should not exceed card width */
    max-height: 80%; /* Image should not exceed card height */
    object-fit: contain; /* Maintain aspect ratio and fit within container */
  }

  .card-details {
    display: none; /* Hide details by default */
  }

  h1 {
      text-align: center;
  }

  #searchInput {
      width: 50%;
      margin: 20px auto;
      display: block;
  }
  
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000; /* Ensure overlay is on top */
  }

  .modal {
    background-color: white;
    padding: 20px;
    border-radius: 5px;
    position: relative; /* For positioning the close button */
  }

  .modal img {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
  }

  .close-button {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 20px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>GCG Checker UPDATED 0.1.5</h1>
<input type="text" id="searchInput" placeholder="Search cards...">

<select id="setFilter">
  <option value="">All Sets</option>
  <option value="Beta Edition">Beta Edition</option>
  <option value="Starter Deck 01">Starter Deck 01</option>
  <option value="Starter Deck 02">Starter Deck 02</option>
  <option value="Starter Deck 03">Starter Deck 03</option>
  <option value="Starter Deck 04">Starter Deck 04</option>
  <option value="Newtype Rising">Newtype Rising</option>
  <option value="Promos">Bandai Promos</option>
</select>

<select id="colorFilter">
  <option value="">All Colors</option>
  <option value="blue">Blue</option>
  <option value="green">Green</option>
  <option value="white">White</option>
  <option value="token">Token</option>
</select>  

<div class="card-container" id="cardContainer"></div>

<div id="overlay" class="overlay" style="display: none;">
  <div class="modal">
    <img id="modalImage" src="" alt="Card Image">
    <span class="close-button" onclick="closeModal()">&times;</span>
  </div>
</div>

<script>
const cards = [
  {
    src: "ST01-001-Gundam.png",
    alt: "ST01-001",
    counter: 0,
    name: "Gundam",
    color: "blue",
    cost: 3,
    level: 4,
    type: "unit",
    set: "Beta Edition, Starter Deck 01"
  },
  {
    src: "ST01-001_plus-Gundam.png", 
    alt: "ST01-001+",
    counter: 0,
    name: "Gundam",
    color: "blue",
    cost: 3,
    level: 4,
    type: "unit",
    set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-002-GundamMA.png", 
      alt: "ST01-002",
      counter: 0,
      name: "Gundam (MA Form)",
      color: "blue",
      cost: 3,
      level: 5,
      type: "unit",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-005-GM.png", 
      alt: "ST01-005",
      counter: 0,
      name: "GM",
      color: "blue",
      cost: 1,
      level: 2,
      type: "unit",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-007-AerialBoF.png", 
      alt: "ST01-007",
      counter: 0,
      name: "Aerial (Bit on Form)",
      color: "white",
      cost: 2,
      level: 4,
      type: "unit",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-008-Trainer.png", 
      alt: "ST01-008",
      counter: 0,
      name: "Demi Trainer",
      color: "white",
      cost: 1,
      level: 1,
      type: "unit",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-010-AmuroRay.png", 
      alt: "ST01-010",
      counter: 0,
      name: "Amuro Ray",
      color: "blue",
      cost: 1,
      level: 4,
      type: "pilot",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-011-Suletta.png", 
      alt: "ST01-011",
      counter: 0,
      name: "Suletta Mercury",
      color: "white",
      cost: 1,
      level: 4,
      type: "pilot",
      set: "Beta Edition, Starter Deck 01"
  },
   {
      src: "ST01-011_plus-Suletta.png", 
      alt: "ST01-011+",
      counter: 0,
      name: "Suletta Mercury",
      color: "white",
      cost: 1,
      level: 4,
      type: "pilot",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-012-Hayato.png", 
      alt: "ST01-012",
      counter: 0,
      name: "Thoroughly Damaged Hayato Kobayashi",
      color: "blue",
      cost: 1,
      level: 2,
      type: "pilot, command",
      set: "Beta Edition, Starter Deck 01"    
  },
  {
      src: "ST01-013-Kai.png", 
      alt: "ST01-013",
      counter: 0,
      name: "Kai's Resolve Kai Shiden",
      color: "blue ",
      cost: 1,
      level: 3,
      type: "pilot, command",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-015-WhiteBase.png", 
      alt: "ST01-015",
      counter: 0,
      name: "White Base",
      color: "blue ",
      cost: 2,
      level: 3,
      type: "base",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST01-016-Asticassia.png", 
      alt: "ST01-016",
      counter: 0,
      name: "Asticassia School of Technology, Earth House",
      color: "white",
      cost: 2,
      level: 3,
      type: "base",
      set: "Beta Edition, Starter Deck 01"
  },
  {
      src: "ST02-001-WGundam.png", 
      alt: "ST02-001",
      counter: 0,
      name: "Wing Gundam XXXG-01W",
      color: "green",
      cost: 4,
      level: 6,
      type: "unit",
      set: "Beta Edition, Starter Deck 02"
  },
  {
      src: "ST02-001_plus-WGundam.png", 
      alt: "ST02-001+",
      counter: 0,
      name: "Wing Gundam XXXG-01W",
      color: "green",
      cost: 4,
      level: 6,
      type: "unit",
     set: "Beta Edition, Starter Deck 02"
  },
  {
      src: "ST02-002-WGundamBM.png", 
      alt: "ST02-002",
      counter: 0,
      name: "Wing Gundam (Bird Mode) XXXG-01W",
      color: "green",
      cost: 3,
      level: 3,
      type: "unit",
      set: "Beta Edition, Starter Deck 02"
  },
  {
      src: "ST02-005-Maganac.png", 
      alt: "ST02-005",
      counter: 0,
      name: "Maganac WMS-03",
      color: "green",
      cost: 2,
      level: 2,
      type: "unit",
      set: "Beta Edition, Starter Deck 02"
  },
  {
      src: "ST02-010-Heero.png", 
      alt: "ST02-010",
      counter: 0,
      name: "Heero Yuy",
      color: "green",
      cost: 1,
      level: 4,
      type: "pilot",
      set: "Beta Edition, Starter Deck 02"
  },
  {
      src: "ST02-012-Trowa.png", 
      alt: "ST02-012",
      counter: 0,
      name: "Simultaneous Fire Trowa Barton",
      color: "green",
      cost: 1,
      level: 4,
      type: "pilot, command",
      set: "Beta Edition, Starter Deck 02"
  },
  {
      src: "ST02-013-Quatre.png", 
      alt: "ST02-013",
      counter: 0,
      name: "Peaceful Timbre Quatre Raberba Winner",
      color: "green",
      cost: 1,
      level: 4,
      type: "pilot, command",
      set: "Beta Edition, Starter Deck 02"
  },
  {
      src: "ST02-015-Gabriel.png", 
      alt: "ST02-015",
      counter: 0,
      name: "Saint Gabriel Institute",
      color: "green",
      cost: 2,
      level: 2,
      type: "base",
      set: "Beta Edition, Starter Deck 02"
  },
  {
      src: "ST03-007-ZakuI.png", 
      alt: "ST03-007",
      counter: 0,
      name: "Zaku I",
      color: "green",
      cost: 1,
      level: 1,
      type: "unit",
      set: "Beta Edition, Starter Deck 03"
  },
  {
      src: "ST03-008-ZakuII.png", 
      alt: "ST03-008",
      counter: 0,
      name: "Zaku II",
      color: "green",
      cost: 1,
      level: 2,
      type: "unit",
      set: "Beta Edition, Starter Deck 03"
  },
  {
      src: "ST03-011-Char.png", 
      alt: "ST03-011",
      counter: 0,
      name: "Char Aznable",
      color: "green",
      cost: 1,
      level: 3,
      type: "pilot",
      set: "Beta Edition, Starter Deck 03"
  },
  {
      src: "ST03-011_plus-Char.png", 
      alt: "ST03-011+",
      counter: 0,
      name: "Char Aznable",
      color: "green",
      cost: 1,
      level: 3,
      type: "pilot",
      set: "Beta Edition, Starter Deck 03"
  },
  {
      src: "ST03-016-Falmel.png", 
      alt: "ST03-016",
      counter: 0,
      name: "Falmel",
      color: "green",
      cost: 2,
      level: 3,
      type: "base",
      set: "Beta Edition, Starter Deck 03"
  },
  {
      src: "ST04-001-ASGundam.png", 
      alt: "ST04-001",
      counter: 0,
      name: "Aile Strike Gundam GRT-X105+AQM/EX01",
      color: "white",
      cost: 4,
      level: 5,
      type: "unit",
      set: "Beta Edition, Starter Deck 04"
  },
  {
      src: "ST04-001_plus-ASGundam.png", 
      alt: "ST04-001+",
      counter: 0,
      name: "Aile Strike Gundam GRT-X105+AQM/EX01",
      color: "white",
      cost: 4,
      level: 5,
      type: "unit",
      set: "Beta Edition, Starter Deck 04"
  },
  {
      src: "ST04-002-StrikeGundam.png", 
      alt: "ST04-002",
      counter: 0,
      name: "Strike Gundam",
      color: "white",
      cost: 2,
      level: 4,
      type: "unit",
      set: "Beta Edition, Starter Deck 04"
  },
  {
      src: "ST04-005-StrikeDagger.png", 
      alt: "ST04-005",
      counter: 0,
      name: "Strike Dagger",
      color: "white",
      cost: 2,
      level: 2,
      type: "unit",
      set: "Beta Edition, Starter Deck 04"
  },
  {
      src: "ST04-010-Kira.png", 
      alt: "ST04-010",
      counter: 0,
      name: "Kira Yamato",
      color: "white",
      cost: 1,
      level: 4,
      type: "pilot",
      set: "Beta Edition, Starter Deck 04"
  },
  {
      src: "ST04-013-Hawk.png", 
      alt: "ST04-013",
      counter: 0,
      name: "Hawk of Endymion Mu La Flaga",
      color: "white",
      cost: 1,
      level: 2,
      type: "pilot, command",
      set: "Beta Edition, Starter Deck 04"
  },
];

function displayCards(cardsToDisplay) {
 const cardContainer = document.getElementById('cardContainer');
  cardContainer.innerHTML = ''; // Clear existing cards

  cardsToDisplay.forEach(card => {
    const cardDiv = document.createElement('div');
    cardDiv.classList.add('card');

    const img = document.createElement('img');
    img.src = card.src;
    img.alt = card.alt;
    img.addEventListener('click', () => openModal(card.src)); // Add click listener
    cardDiv.appendChild(img);

    // Hidden details for search:
    const detailsDiv = document.createElement('div');
    detailsDiv.classList.add('card-details');
    detailsDiv.innerHTML = `
      <p>Name: ${card.name}</p>
      <p>Color: ${card.color}</p>
      <p>Cost: ${card.cost}</p>
      <p>Level: ${card.level}</p>
      <p>Type: ${card.type}</p>
      <p>Set: ${card.set}</p>
    `;
    
    cardDiv.appendChild(detailsDiv);
    cardContainer.appendChild(cardDiv);

    const counterDiv = document.createElement('div'); //Separate div for the counter
    counterDiv.innerHTML = `
        <p>Counter: <span id="counter-${card.alt}">${card.counter}</span></p>
        <button onclick="incrementCounter('${card.alt}')">+</button>
        <button onclick="decrementCounter('${card.alt}')">-</button>
    `;
    cardDiv.appendChild(counterDiv);


    cardContainer.appendChild(cardDiv);
  });
}

function openModal(imageSrc) {
  document.getElementById('modalImage').src = imageSrc;
  document.getElementById('overlay').style.display = 'flex';
}

function closeModal() {
  document.getElementById('overlay').style.display = 'none';
}
  
function incrementCounter(cardAlt) {
    const counterSpan = document.getElementById(`counter-${cardAlt}`);
    let counterValue = parseInt(counterSpan.textContent);
    counterValue++;
    counterSpan.textContent = counterValue;

    //Update the card Object (Important for persistence if you were to save the data)
    const cardIndex = cards.findIndex(card => card.alt === cardAlt);
    if (cardIndex !== -1) {
        cards[cardIndex].counter = counterValue;
    }
}

function decrementCounter(cardAlt) {
    const counterSpan = document.getElementById(`counter-${cardAlt}`);
    let counterValue = parseInt(counterSpan.textContent);
    if (counterValue > 0) {
        counterValue--;
        counterSpan.textContent = counterValue;
        const cardIndex = cards.findIndex(card => card.alt === cardAlt);
        if (cardIndex !== -1) {
            cards[cardIndex].counter = counterValue;
        }
    }
}

const searchInput = document.getElementById('searchInput');
const setFilter = document.getElementById('setFilter'); // Get the select element
const colorFilter = document.getElementById('colorFilter'); // Get color filter

function filterCards() {
    const searchTerm = searchInput.value.toLowerCase();
    const selectedSet = setFilter.value;
    const selectedColor = colorFilter.value;

    const filteredCards = cards.filter(card => {
        const lowerCaseSet = card.set.toLowerCase();
        const cardSets = lowerCaseSet.split(",").map(set => set.trim());
        const setSearch = selectedSet === "" || cardSets.some(set => set.toLowerCase().includes(selectedSet.toLowerCase()));
        const setColor = selectedColor === "" || card.color.toLowerCase() === selectedColor.toLowerCase();

        // Apply set and color filters FIRST
        if (setSearch && setColor) { // Only proceed if set and color match
            const textMatch = card.name.toLowerCase().includes(searchTerm) ||
                            card.color.toLowerCase().includes(searchTerm) ||
                            card.cost.toString().includes(searchTerm) ||
                            card.level.toString().includes(searchTerm) ||
                            card.type.toLowerCase().includes(searchTerm) ||
                            lowerCaseSet.includes(searchTerm);

            return textMatch; // THEN apply text search
        } else {
            return false; // If set or color doesn't match, card is filtered out
        }
    });

    displayCards(filteredCards);
}



searchInput.addEventListener('input', filterCards);
setFilter.addEventListener('change', filterCards);
colorFilter.addEventListener('change', filterCards); // Event listener for color filter

displayCards(cards); // Initial display
</script>

</body>
</html>
